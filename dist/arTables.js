!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=0)}([function(e,t,a){a(1),e.exports=a(2)},function(e,t){function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done)&&(a.push(l.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.supportedAggregates=[{name:"count",label:"Count"},{name:"sum",label:"Total"},{name:"min",label:"Min"},{name:"max",label:"Max"},{name:"avg",label:"Average"}],!t.arTable){void 0===e.lastId&&(e.lastId=1),t.arTable=this,this.tableNode=t,this.showingFiltered=!1,window.addEventListener("resize",this.handleResize.bind(this));var a=this.tableNode.querySelector("thead>tr"),r=!1;0===a.length&&(r=!0,a=this.tableNode.querySelector("tr")),this.headerCells=[].slice.call(a.children),t.dataset&&t.dataset.minWidth?this.minWidth=t.dataset.minWidth:this.minWidth=100*this.headerCells.length,this.layout="normal",this.bodyTrs=[].slice.call(this.tableNode.querySelectorAll("tbody tr")),0===this.bodyTrs.length&&(this.bodyTrs=[].slice.call(this.tableNode.querySelectorAll("tr"))),r&&this.bodyTrs.length>0&&this.bodyTrs.shift(),this.parseTableData(),this.addAggregateRows(),this.calculateAggregates(),this.handleResize(),this.createFilterUi()}}var t,r,i;return t=e,(r=[{key:"calculateAggregates",value:function(){var e=this;this.casts.forEach((function(t){"count"in t.aggregates&&(t.aggregates.count.all=0,t.aggregates.count.filtered=0),"sum"in t.aggregates&&(t.aggregates.sum.all=0,t.aggregates.sum.filtered=0),"min"in t.aggregates&&(t.aggregates.min.all=0,t.aggregates.min.filtered=0),"max"in t.aggregates&&(t.aggregates.max.all=0,t.aggregates.max.filtered=0),e.bodyTrs.forEach((function(e,a){var r=e.children[t.idx];"count"in t.aggregates&&(t.aggregates.count.all+=1,e.arFiltered&&(t.aggregates.count.filtered+=1)),"number"===t.type&&("sum"in t.aggregates&&(t.aggregates.sum.all+=r.arData,e.arFiltered&&(t.aggregates.sum.filtered+=r.arData)),"min"in t.aggregates&&((null===t.aggregates.min.all||t.aggregates.min.all<r.arData)&&(t.aggregates.min.all=r.arData),e.arFiltered&&(null===t.aggregates.min.filtered||t.aggregates.min.filtered<r.arData)&&(t.aggregates.min.filtered=r.arData)),"max"in t.aggregates&&((null===t.aggregates.max.all||t.aggregates.max.all>r.arData)&&(t.aggregates.max.all=r.arData),e.arFiltered&&(null===t.aggregates.max.filtered||t.aggregates.max.filtered>r.arData)&&(t.aggregates.max.filtered=r.arData)))})),"number"===t.type&&"avg"in t.aggregates&&(t.aggregates.avg.all=t.aggregates.sum.all/t.aggregates.count.all,t.aggregates.avg.filtered=t.aggregates.sum.filtered/t.aggregates.count.filtered),["count","sum"].forEach((function(a){if(a in t.aggregates){var r=t.aggregates[a];r.cell.textContent=e.showingFiltered?r.filtered+"/"+r.all+" ("+Math.round(100*r.filtered/r.all)+"%)":r.all,r.arCell&&(r.arCell.textContent=r.cell.textContent)}})),["min","max","avg"].forEach((function(a){if(a in t.aggregates){var r=t.aggregates[a];r.cell.textContent=e.showingFiltered?r.filtered:r.all,r.arCell?r.arCell.textContent=r.cell.textContent:console.warn("not updating cell",r)}}))}))}},{key:"addAggregateRows",value:function(){var e=this,t=this.tableNode.querySelector("tbody");this.supportedAggregates.forEach((function(a){if(a.name in e.aggregateFunctions){var r=document.createElement("tr");r.classList.add("aggregate",a.name);var n=document.createElement("td");n.textContent=a.label,r.append(n),e.headerCells.slice(1).forEach((function(e,t){var n=document.createElement("td");e.cast&&a.name in e.cast.aggregates&&(e.cast.aggregates[a.name].cell=n),r.appendChild(n)})),t.appendChild(r)}}))}},{key:"parseTableData",value:function(){var e=this;0!==this.bodyTrs.length&&0!==this.headerCells.length&&(this.casts=[],this.indexes={},this.aggregateFunctions={},this.headerCells.forEach((function(t,a){if("string"==typeof t.dataset.cast){var r={header:t,idx:a,type:t.dataset.cast};"values"===t.dataset.filter&&(r.rowsByValue={}),r.sortable=void 0!==t.dataset.sortable,r.aggregates={},t.dataset.aggregates&&t.dataset.aggregates.split(/\s*,\s*/).forEach((function(a){a.match(/^(sum|count|avg|min|max)$/)?(e.aggregateFunctions[a]=!0,r.aggregates[a]={}):console.warn("arTables: invalid aggregate function",{aggregateFunction:a,cast:cast,cell:t})})),e.casts.push(r),t.cast=r}})),this.tableNode.dataset.filter,0!==this.casts.length&&this.bodyTrs.forEach((function(t){e.casts.forEach((function(e){var a=t.children[e.idx];if(void 0!==a){if("date"===e.type)a.arData=new Date(a.textContent);else if("number"===e.type)a.arData=parseFloat(a.textContent);else{var r=a.textContent.replace(/^\s*(.*?)\s*$/,"$1");"text"===e.type?a.arData=r.toLocaleLowerCase():a.arData=r}"rowsByValue"in e&&(a.arData in e.rowsByValue||(e.rowsByValue[a.arData]={rows:[],label:r}),e.rowsByValue[a.arData].rows.push(t))}}))})))}},{key:"createFilterUi",value:function(){var e=this;this.ui=document.createElement("div"),this.ui.classList.add("arr-filters");var t=[];this.casts.forEach((function(a){"text"===a.header.dataset.filter?e.addTextFilter(a):"values"===a.header.dataset.filter&&e.addValuesFilter(a),a.sortable&&t.push(a)})),t&&this.addSortOptions(t),this.tableNode.insertAdjacentElement("beforebegin",this.ui)}},{key:"addSortOptions",value:function(t){var a="arr"+e.lastId++,r=document.createElement("label");r.textContent="Sort by",r.setAttribute("for",a);var n=document.createElement("select");n.id=a,n.addEventListener("change",this.applyFilters.bind(this)),n.innerHTML='<option value="">- None -</option>',t.forEach((function(e){var t;(t=document.createElement("option")).value="ASC:"+e.idx,t.textContent=e.header.textContent+" (A-Z)",n.appendChild(t),(t=document.createElement("option")).value="DESC:"+e.idx,t.textContent=e.header.textContent+" (Z-A)",n.appendChild(t)}));var i=document.createElement("div");i.classList.add("arr-filter","arr-filter--sort"),i.appendChild(r),i.appendChild(n),this.sortBy=n,this.ui.appendChild(i)}},{key:"addTextFilter",value:function(t){var a="arr"+e.lastId++,r=document.createElement("label");r.textContent=t.header.textContent,r.setAttribute("for",a);var n=document.createElement("input");n.type="text",n.id=a,n.addEventListener("input",this.applyFilters.bind(this));var i=document.createElement("div");i.classList.add("arr-filter","arr-filter--text"),i.appendChild(r),i.appendChild(n),t.filterMatches=function(e){return e.arData.indexOf(n.value.toLocaleLowerCase())>-1},this.ui.appendChild(i)}},{key:"addValuesFilter",value:function(t){var a="arr"+e.lastId++,r=document.createElement("label");r.textContent=t.header.textContent,r.setAttribute("for",a);var n,i=document.createElement("select");i.id=a,i.addEventListener("change",this.applyFilters.bind(this)),i.innerHTML='<option value="">- Any -</option>';var l=[];for(var s in t.rowsByValue)t.rowsByValue.hasOwnProperty(s)&&l.push({key:s,label:"".concat(t.rowsByValue[s].label," (").concat(t.rowsByValue[s].rows.length,")")});l.sort((function(e,t){return e.key<t.key?-1:e.key>t.key?1:0})),l.forEach((function(e){(n=document.createElement("option")).value=e.key,n.textContent=e.label,i.appendChild(n)}));var o=document.createElement("div");o.classList.add("arr-filter","arr-filter--values"),o.appendChild(r),o.appendChild(i),t.filterMatches=function(e){return""===i.value||e.arData==i.value},this.ui.appendChild(o)}},{key:"applyFilters",value:function(){var e=this,t=this.casts.filter((function(e){return"filterMatches"in e})),r=[];if(this.bodyTrs.forEach((function(a){var n=!0;t.forEach((function(e){var t=a.children[e.idx];t?n&=e.filterMatches(t):n=!1})),n?(a.arFiltered=!0,a.style.display="",e.narrowVersion&&(a.arrCard.style.display=""),r.push(a)):(a.arFiltered=!1,a.style.display="none",e.narrowVersion&&(a.arrCard.style.display="none"))})),this.showingFiltered=r.length<this.bodyTrs.length,"sortBy"in this){if(this.sortBy){var n=a(this.sortBy.value.split(":"),2),i=n[0],l=n[1];this.casts[l],r.sort((function(e,t){var a=t.children[l],r=e.children[l];return a||r?!a&&r?1:a&&!r?-1:a.arData<r.arData?"ASC"===i?-1:1:a.arData>r.arData?"ASC"===i?1:-1:0:0}))}if(r.length>0){var s=r[0].parentElement;r.forEach((function(t){s.insertAdjacentElement("afterbegin",t),e.narrowVersion&&e.narrowVersion.insertAdjacentElement("afterbegin",t.arrCard)}))}}this.calculateAggregates()}},{key:"handleResize",value:function(){var e=this.tableNode.parentElement.clientWidth,t=this.minWidth>e;t&&"normal"===this.layout?this.switchToNarrowLayout():t||"narrow"!==this.layout||this.switchToNormalLayout()}},{key:"switchToNarrowLayout",value:function(){this.narrowVersion||this.createNarrowVersion(),this.layout="narrow",this.tableNode.style.display="none",this.narrowVersion.style.display="block"}},{key:"switchToNormalLayout",value:function(){this.layout="normal",this.narrowVersion.style.display="none",this.tableNode.style.display="block"}},{key:"createNarrowVersion",value:function(){var e=this;if(0!==this.bodyTrs.length){this.narrowVersion=document.createElement("div"),this.narrowVersion.classList.add("arr-table");var t=this.headerCells;this.bodyTrs.forEach((function(a,r){var n=document.createElement("div");n.classList.add("arr-tr",r%2?"even":"odd");var i="";[].forEach.call(a.children,(function(e,a){e.innerHTML&&(i+='<div class="arr-th">'.concat(t[a].innerHTML,'</div><div class="arr-td">').concat(e.innerHTML,"</div>"))})),n.innerHTML=i,n.originalTr=a,a.arrCard=n,e.narrowVersion.appendChild(n)}));var a=document.createElement("div");a.classList.add("aggregate","arr-tr"),this.casts.forEach((function(t){e.supportedAggregates.forEach((function(e){if(e.name in t.aggregates){var r=document.createElement("div");r.classList.add("arr-th"),r.textContent=t.header.textContent+" "+e.label,a.appendChild(r);var n=document.createElement("div");n.classList.add("arr-td"),n.textContent=t.aggregates[e.name].cell.textContent,a.appendChild(n),t.aggregates[e.name].arCell=n}}))})),a.children.length>0&&this.narrowVersion.appendChild(a),this.tableNode.insertAdjacentElement("afterend",this.narrowVersion),this.applyFilters()}else this.narrowVersion=this.tableNode}}])&&n(t.prototype,r),i&&n(t,i),e}();window.ARResponsiveTable=i,i.version="1.0",document.addEventListener("DOMContentLoaded",(function(e){[].forEach.call(document.querySelectorAll("table.ar-responsive"),(function(e,t,a){new i(e)}))}))},function(e,t){}]);